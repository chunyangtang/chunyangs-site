---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

// 1. Generate a path for EVERY post found in src/content/blog
export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => ({
		params: { slug: post.slug },
		props: post,
	}));
}

const post = Astro.props;
const { Content } = await post.render();
---

<Layout title={post.data.title}>
	<article class="max-w-3xl mx-auto py-10">
        <div class="mb-8 text-center">
            <span class="text-sm text-gray-500 dark:text-gray-400 font-mono">
                {post.data.pubDate.toLocaleDateString()}
            </span>
            <h1 class="text-4xl md:text-5xl font-bold mt-2 mb-4 tracking-tight text-gray-900 dark:text-gray-100">
                {post.data.title}
            </h1>
            <div class="flex gap-2 justify-center">
                {post.data.tags.map(tag => (
                    <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-300 text-xs rounded-md">#{tag}</span>
                ))}
            </div>
        </div>
        
        <hr class="border-gray-200 dark:border-gray-800 mb-8" />

		<div class="prose prose-lg prose-blue dark:prose-invert mx-auto prose-headings:font-bold prose-a:text-blue-600 dark:prose-a:text-blue-400 hover:prose-a:text-blue-500 dark:hover:prose-a:text-blue-300">
			<Content />
		</div>
	</article>
    
    <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
        integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV"
        crossorigin="anonymous"
    />
</Layout>