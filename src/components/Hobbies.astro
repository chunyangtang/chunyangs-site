---
import { Image } from "astro:assets";
import {
    Camera,
    Dumbbell,
    ArrowRight,
    ArrowLeft,
    Disc,
    Wind,
    Activity,
    Globe,
    Sparkles,
} from "lucide-react";
import photoImage from "../assets/hobbies/DSC_1124.jpeg";
import RunningImage from "../assets/hobbies/IMG_1638.jpeg";
import MusicImage from "../assets/hobbies/TS12_AlbumCover.png";
import TravelImage1 from "../assets/hobbies/IMG_3842.jpeg";
import TravelImage2 from "../assets/hobbies/IMG_4073.jpeg";
---

<section class="max-w-full py-12">
    <div class="w-full mx-auto mb-6 flex items-end justify-between px-4">
        <div>
            <h2
                class="text-3xl md:text-5xl font-bold tracking-tight text-gray-900 dark:text-gray-100"
            >
                Beyond the Lab
            </h2>
            <p class="text-base md:text-lg text-gray-500 dark:text-gray-400 mt-4 md:mt-6 max-w-2xl">
                Research shapes my thinking, but curiosity shapes my life.
                Beyond the lab, I embrace a multidimensional journey that
                extends far past a single discipline.
                <br />
                Swipe to explore more.
            </p>
        </div>

        <div class="hidden md:flex gap-4">
            <button
                id="scroll-left"
                aria-label="Scroll hobbies left"
                class="p-5 rounded-full border border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors text-gray-600 dark:text-gray-300"
            >
                <ArrowLeft size={28} />
            </button>
            <button
                id="scroll-right"
                aria-label="Scroll hobbies right"
                class="p-5 rounded-full bg-black dark:bg-white text-gray-100 dark:text-black hover:bg-gray-800 dark:hover:bg-gray-200 transition-colors shadow-xl"
            >
                <ArrowRight size={28} />
            </button>
        </div>
    </div>

    <div
        id="hobby-scroll"
        class="flex gap-4 overflow-x-auto snap-x snap-mandatory px-4 pb-8 no-scrollbar scroll-smooth items-start md:items-stretch h-auto md:h-[620px] lg:h-[560px]"
    >
        <div class="relative flex-none w-full h-auto min-h-[620px] sm:min-h-[640px] md:min-h-0 md:h-full snap-center rounded-3xl overflow-hidden bg-gradient-to-br from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-100 dark:border-blue-900/30 shadow-xl shadow-blue-900/10 flex flex-col md:flex-row">
            {/* Left photo */}
            <div class="md:w-1/2 relative h-56 sm:h-64 md:h-full overflow-hidden">
                <Image
                src={RunningImage}
                alt="Running medal"
                class="absolute inset-0 w-full h-full object-cover object-center opacity-90 grayscale-[25%] group-hover:grayscale-0 transition-all duration-1000"
                width={1200}
                height={1200}
                />

                {/* cinematic overlay for readability */}
                <div class="absolute inset-0 bg-gradient-to-tr from-blue-700/25 via-black/10 to-transparent dark:from-blue-950/55" />
                <div class="absolute inset-0 bg-gradient-to-t from-black/45 via-transparent to-transparent" />

                {/* Big faint word */}
                <div class="absolute bottom-8 left-8 md:bottom-10 md:left-10 text-white">
                <div class="text-6xl md:text-7xl font-black tracking-tighter uppercase opacity-10 select-none">
                    Move
                </div>
                <div class="mt-2 text-sm text-white/70 font-mono uppercase tracking-widest">
                    built by consistency
                </div>
                </div>
            </div>

            {/* Right: Content */}
            <div class="md:w-1/2 p-5 sm:p-6 md:p-10 flex flex-col justify-start md:justify-center">
                <div class="flex items-center gap-3 text-blue-700 dark:text-blue-300 mb-4 md:mb-6">
                <Activity size={22} />
                <span class="font-mono text-sm uppercase tracking-widest">
                    Physical Engineering
                </span>
                </div>

                <h3 class="text-2xl sm:text-3xl md:text-4xl font-bold text-blue-950 dark:text-blue-50 mb-4 tracking-tight">
                Strength for the Long Run
                </h3>

                <p class="text-base md:text-lg text-blue-950/70 dark:text-blue-100/70 mb-5 md:mb-6 leading-relaxed max-w-xl">
                Sport is how I reset, regulate, and rebuild. It keeps my energy stable,
                my thinking clear, and my work sustainable.
                </p>

                {/* Primary focus tiles */}
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-5 md:mb-6">
                <div class="bg-white/80 dark:bg-blue-950/30 p-4 sm:p-5 rounded-3xl shadow-sm border border-blue-100/80 dark:border-blue-900/30 hover:scale-[1.02] transition-transform">
                    <Wind class="text-blue-600 dark:text-blue-300 mb-3" />
                    <div class="text-lg font-semibold text-blue-950 dark:text-blue-50">
                    Running
                    </div>
                    <div class="text-xs text-blue-900/60 dark:text-blue-100/50 font-mono uppercase tracking-widest mt-1">
                    rhythm & endurance
                    </div>
                </div>

                <div class="bg-white/80 dark:bg-blue-950/30 p-4 sm:p-5 rounded-3xl shadow-sm border border-blue-100/80 dark:border-blue-900/30 hover:scale-[1.02] transition-transform">
                    <Dumbbell class="text-indigo-600 dark:text-indigo-300 mb-3" />
                    <div class="text-lg font-semibold text-blue-950 dark:text-blue-50">
                    Strength
                    </div>
                    <div class="text-xs text-blue-900/60 dark:text-blue-100/50 font-mono uppercase tracking-widest mt-1">
                    form & discipline
                    </div>
                </div>
                </div>

                {/* Rhythm + other sports */}
                <div class="flex flex-col gap-4">
                <div class="flex items-start gap-3">
                    <div class="mt-1 w-2 h-2 rounded-full bg-blue-600/60 dark:bg-blue-300/60" />
                    <div class="text-blue-950/70 dark:text-blue-100/70">
                    <span class="font-semibold text-blue-950 dark:text-blue-50">Also into</span>
                    <span>: badminton, swimming, and anything that keeps me moving.</span>
                    </div>
                </div>
                </div>
            </div>
        </div>
        <div
            class="relative flex-none w-full h-auto min-h-[620px] sm:min-h-[640px] md:min-h-0 md:h-full snap-center rounded-3xl overflow-hidden bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-xl shadow-gray-200/50 dark:shadow-black/50 flex flex-col md:flex-row"
        >
            <div
                class="md:w-1/3 p-5 sm:p-6 md:p-10 flex flex-col justify-start md:justify-between gap-6 z-10 bg-white dark:bg-gray-900"
            >
                <div>
                    <div
                        class="flex items-center gap-3 text-gray-400 dark:text-gray-500 mb-6"
                    >
                        <Camera size={24} />
                        <span
                            class="font-mono text-sm uppercase tracking-widest"
                            >Visual Arts</span
                        >
                    </div>
                    <h3
                        class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 dark:text-gray-100 leading-tight mb-4"
                    >
                        Capturing<br /><span
                            class="text-gray-400 dark:text-gray-600">Light</span
                        >
                    </h3>
                    <p class="text-base text-gray-600 dark:text-gray-400 leading-relaxed">
                        A beginner with a <strong class="text-gray-900 dark:text-gray-100">Nikon Z5</strong>,
                        collecting small scenes — morning light, quiet streets, and travel details — one frame at a time.
                    </p>
                </div>

                <div class="flex flex-wrap items-center gap-2 sm:gap-3">
                    <div class="px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-full text-sm font-bold text-gray-600 dark:text-gray-300">
                        Composition
                    </div>
                    <div class="px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-full text-sm font-bold text-gray-600 dark:text-gray-300">
                        Golden hour
                    </div>
                    <div class="px-4 py-2 bg-gray-100 dark:bg-gray-800 rounded-full text-sm font-bold text-gray-600 dark:text-gray-300">
                        City & nature
                    </div>
                </div>
            </div>

            <div class="md:w-2/3 relative h-56 sm:h-72 md:h-full bg-gray-100 dark:bg-gray-800">
                <Image
                    src={photoImage}
                    alt="Photography"
                    class="absolute inset-0 w-full h-full object-cover"
                    width={1200}
                    height={800}
                />
            </div>
        </div>

        <div class="relative flex-none w-full h-auto min-h-[620px] sm:min-h-[640px] md:min-h-0 md:h-full snap-center rounded-3xl overflow-hidden bg-black shadow-xl shadow-purple-900/20">
        {/* Blurred background derived from album cover */}
        <Image
            src={MusicImage}
            alt="Album cover background"
            class="absolute inset-0 w-full h-full object-cover opacity-35 blur-3xl scale-125"
            width={120}
            height={120}
        />
        {/* Dark overlay for contrast */}
        <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/55 to-black/70" />

        <div class="relative z-10 w-full h-full flex flex-col md:flex-row items-start md:items-center justify-center p-5 sm:p-6 md:p-12 gap-6 md:gap-16">
            {/* Album cover (smaller) */}
            <div class="shrink-0">
            <div class="relative w-48 sm:w-56 md:w-64 aspect-square rounded-2xl overflow-hidden shadow-2xl border border-white/15 bg-zinc-900">
                <Image
                src={MusicImage}
                alt="Album Art"
                class="absolute inset-0 w-full h-full object-cover transition-transform duration-700 hover:scale-105"
                width={700}
                height={700}
                />
                {/* subtle glass highlight */}
                <div class="absolute inset-0 bg-gradient-to-tr from-white/10 to-transparent opacity-25 pointer-events-none" />

                {/* small badge in corner */}
                <div class="absolute top-3 left-3 px-2.5 py-1 rounded-full bg-black/55 border border-white/15 text-xs font-mono text-white/90 backdrop-blur">
                Top Song · 50 streams
                </div>
            </div>

            {/* “Listening age” callout (optional, from your Wrapped) */}
            <!-- <div class="mt-4 flex items-center justify-center">
                <div class="px-3 py-1.5 rounded-full bg-white/10 border border-white/10 text-sm text-white/85 backdrop-blur">
                Listening age: <span class="font-semibold text-white">31</span>
                <span class="text-white/60"> · early 2010s core</span>
                </div>
            </div> -->
            </div>

            {/* Text content */}
            <div class="w-full md:w-[30rem] text-gray-100">
            <div class="flex items-center gap-3 text-pink-300 mb-4 md:mb-5">
                <Disc size={22} class="animate-spin-slow" />
                <span class="font-mono text-xs uppercase tracking-widest">Now Playing</span>
            </div>

            <h3 class="text-3xl sm:text-4xl md:text-6xl font-bold tracking-tighter leading-[0.95] mb-3">
                My 2025 Sound
            </h3>

            <p class="text-base sm:text-lg text-gray-200/90 font-light mb-5 md:mb-6">
                <span class="font-semibold text-white">The Fate of Ophelia</span>
                <span class="text-white/60"> · </span>
                <span class="text-white/85">Taylor Swift</span>
            </p>

            {/* Top genres as ranked chips */}
            <div class="mb-6">
                <div class="text-xs font-mono uppercase tracking-widest text-white/60 mb-2">
                Top genres
                </div>
                <div class="flex flex-wrap gap-2">
                {[
                    "Soft pop",
                    "Musicals",
                    "Electro House",
                    "Pop Rap",
                    "K-Pop",
                ].map((g) => (
                    <span class="px-3 py-1 rounded-full bg-white/10 border border-white/10 text-sm text-white/85">
                    {g}
                    </span>
                ))}
                </div>
            </div>

            {/* “Energy” bar (semantic, not fake timestamps) */}
            <div class="mb-2">
                <div class="flex justify-between text-xs font-mono text-white/55 mb-2">
                <span>Replay energy</span>
                <span>50 plays</span>
                </div>
                <div class="w-full h-2 bg-white/15 rounded-full overflow-hidden">
                {/* pick a percentage that feels right; 50 streams could map to “high” */}
                <div class="w-[72%] h-full bg-pink-400 rounded-full" />
                </div>
            </div>

            {/* Small footer vibe line */}
            <p class="mt-5 text-sm text-white/60">
                Soft pop heart, theatre kid edge, a little club-night electro, and a K-pop switch-up.
            </p>
            </div>
        </div>
        </div>

        <div class="group relative flex-none w-full h-auto min-h-[560px] sm:min-h-[600px] md:min-h-0 md:h-full snap-center rounded-3xl overflow-hidden bg-stone-950 shadow-xl">
            {/* subtle ambient glow */}
            <div class="absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-amber-500/10" />

            <div class="relative z-10 w-full h-full p-5 sm:p-6 md:p-10">
                <div class="flex flex-col h-full gap-5 md:gap-7">
                {/* Header */}
                <div class="flex items-center gap-3 text-amber-300">
                    <Globe size={20} />
                    <span class="font-mono text-xs uppercase tracking-widest">
                    Exploring the World
                    </span>
                </div>

                {/* Main content */}
                <div class="flex-1 grid grid-cols-1 md:grid-cols-12 gap-4 md:gap-6 items-stretch">
                    {/* Left: vertical airplane photo */}
                    <div class="md:col-span-5">
                    <div class="relative h-36 sm:h-44 md:h-full rounded-2xl overflow-hidden border border-white/10 shadow-2xl">
                        <Image
                        src={TravelImage1}
                        alt="In the air"
                        class="absolute inset-0 w-full h-full object-cover object-center transition-transform duration-700 group-hover:scale-[1.03]"
                        width={900}
                        height={1600}
                        />
                        <div class="absolute inset-0 bg-gradient-to-t from-black/55 via-transparent to-transparent" />

                        {/* small caption */}
                        <div class="absolute bottom-3 left-3 px-3 py-1.5 rounded-full bg-black/45 border border-white/10 text-xs text-white/85 backdrop-blur">
                        window seat moments
                        </div>
                    </div>
                    </div>

                    {/* Right: horizontal HK night view */}
                    <div class="md:col-span-7 flex flex-col gap-4">
                    <div class="relative h-32 sm:h-40 md:h-52 rounded-2xl overflow-hidden border border-white/10 shadow-2xl">
                        <Image
                        src={TravelImage2}
                        alt="City nights"
                        class="absolute inset-0 w-full h-full object-cover object-center transition-transform duration-700 group-hover:scale-[1.03]"
                        width={1600}
                        height={900}
                        />
                        <div class="absolute inset-0 bg-gradient-to-t from-black/55 via-transparent to-transparent" />

                        <div class="absolute bottom-3 left-3 px-3 py-1.5 rounded-full bg-black/45 border border-white/10 text-xs text-white/85 backdrop-blur">
                        city nights & skyline walks
                        </div>
                    </div>

                    {/* Text block */}
                    <div class="flex-1 flex flex-col gap-4">
                        <div>
                        <h3 class="text-3xl md:text-5xl font-bold tracking-tighter text-gray-100 leading-[0.95]">
                            Places,
                            <br class="hidden md:block" />
                            not trophies
                        </h3>
                        <p class="mt-3 text-sm md:text-base text-white/70 max-w-xl">
                            Mostly cities, local corners, night walks, and the quiet moments in between.
                        </p>
                        </div>

                        <!-- {/* Tags */}
                        <div class="mt-1 flex flex-wrap gap-2">
                        {[
                            "City nights",
                            "Long walks",
                            "Window seats",
                        ].map((t) => (
                            <span class="px-3 py-1.5 text-sm rounded-full border border-white/15 text-white/85 backdrop-blur bg-white/5">
                            {t}
                            </span>
                        ))}
                        </div> -->
                    </div>
                    </div>
                </div>

                {/* tiny footer line (optional) */}
                <div class="hidden md:block text-xs font-mono text-white/40">
                    Mostly: cities + local gems. Occasionally: far-away flights.
                </div>
                </div>
            </div>
        </div>

        <!-- <div
            class="relative flex-none w-full h-full snap-center rounded-3xl overflow-hidden bg-[#f4ecd8] border border-stone-200 shadow-xl flex flex-col md:flex-row items-center justify-center p-8 md:p-12"
        >
            <div class="max-w-2xl text-center">
                <BookOpen size={40} class="text-stone-800 mx-auto mb-6" />

                <h3
                    class="text-4xl md:text-6xl font-serif text-stone-900 font-bold mb-6 leading-tight"
                >
                    "The universe is a dark forest."
                </h3>

                <p
                    class="text-lg md:text-xl font-serif text-stone-600 italic mb-8"
                >
                    — Liu Cixin, The Three-Body Problem
                </p>

                <div class="h-px w-32 bg-stone-400 mx-auto mb-12"></div>

                <div
                    class="flex justify-center gap-4 text-stone-500 font-sans text-sm font-bold uppercase tracking-widest"
                >
                    <span>Sci-Fi</span>
                    <span>•</span>
                    <span>Philosophy</span>
                    <span>•</span>
                    <span>History</span>
                </div>
            </div>
        </div> -->
        <div class="relative flex-none w-full h-auto min-h-[620px] sm:min-h-[640px] md:min-h-0 md:h-full snap-center rounded-3xl overflow-hidden bg-stone-950 shadow-xl">

            <div class="relative z-10 w-full h-full p-6 sm:p-8 md:p-12 lg:p-14 flex flex-col gap-6 md:gap-10">

                {/* Header */}
                <div class="flex items-center gap-3 text-sky-300">
                <Sparkles size={18} />
                <span class="font-mono text-xs uppercase tracking-widest">
                    Lifelong Learner
                </span>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-12 gap-6 md:gap-10">

                {/* Left — Big Statement */}
                <div class="md:col-span-5 flex flex-col justify-between">
                    <div>
                    <h3 class="text-3xl sm:text-4xl md:text-5xl font-semibold text-gray-100 tracking-tight leading-[1.05]">
                        Always in learning mode.
                    </h3>

                    <p class="mt-4 md:mt-5 text-base sm:text-lg text-white/65 leading-relaxed">
                        Languages, systems, technologies, and the hidden structures behind how the world works.
                    </p>
                    </div>

                    <p class="mt-8 text-sm text-white/40 font-mono">
                    Curiosity is a long-term project.
                    </p>
                </div>

                {/* Right — Knowledge Clusters */}
                <div class="md:col-span-7 grid grid-cols-1 sm:grid-cols-2 gap-6">

                    {/* Language & Culture */}
                    <div class="p-5 md:p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur">
                    <h4 class="text-white text-lg font-medium mb-3">
                        Language & Culture
                    </h4>
                    <ul class="text-sm text-white/70 space-y-1">
                        <li>• New languages</li>
                        <li>• Regional cultures</li>
                        <li>• Urban life & society</li>
                    </ul>
                    </div>

                    {/* Science & Systems */}
                    <div class="p-5 md:p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur">
                    <h4 class="text-white text-lg font-medium mb-3">
                        Science & Systems
                    </h4>
                    <ul class="text-sm text-white/70 space-y-1">
                        <li>• Emerging technology</li>
                        <li>• Frontier science</li>
                        <li>• Systems thinking</li>
                    </ul>
                    </div>

                    {/* Tech & Play */}
                    <div class="p-5 md:p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur">
                    <h4 class="text-white text-lg font-medium mb-3">
                        Tech & Play
                    </h4>
                    <ul class="text-sm text-white/70 space-y-1">
                        <li>• Consumer electronics</li>
                        <li>• DIY hardware projects</li>
                        <li>• AAA games & simulations</li>
                    </ul>
                    </div>

                    {/* Stories & Human Nature */}
                    <div class="p-5 md:p-6 rounded-2xl border border-white/10 bg-white/5 backdrop-blur">
                    <h4 class="text-white text-lg font-medium mb-3">
                        Stories & Human Nature
                    </h4>
                    <ul class="text-sm text-white/70 space-y-1">
                        <li>• Films & TV series</li>
                        <li>• Geopolitics</li>
                        <li>• Criminal psychology</li>
                    </ul>
                    </div>

                </div>

                </div>

            </div>
            </div>

    </div>
</section>

<script>
    const initHobbyScroll = () => {
        const scrollContainer = document.getElementById("hobby-scroll");
        const leftBtn = document.getElementById("scroll-left");
        const rightBtn = document.getElementById("scroll-right");

        if (!(scrollContainer && leftBtn && rightBtn)) {
            return;
        }

        const getRealCards = () =>
            Array.from(scrollContainer.children).filter(
                (el) => !(el instanceof HTMLElement && el.dataset.loopClone),
            );

        const getStep = () => {
            const cards = getRealCards();
            const firstCard = cards[0];
            const cardWidth =
                firstCard instanceof HTMLElement
                    ? firstCard.getBoundingClientRect().width
                    : 500;
            const gap = parseFloat(getComputedStyle(scrollContainer).gap || "16");
            return cardWidth + (Number.isNaN(gap) ? 16 : gap);
        };

        const withInstantScroll = (callback) => {
            const prev = scrollContainer.style.scrollBehavior;
            scrollContainer.style.scrollBehavior = "auto";
            callback();
            requestAnimationFrame(() => {
                scrollContainer.style.scrollBehavior = prev;
            });
        };

        if (!scrollContainer.dataset.loopPrepared) {
            const cards = getRealCards();
            if (cards.length >= 2) {
                const firstClone = cards[0].cloneNode(true);
                const lastClone = cards[cards.length - 1].cloneNode(true);

                if (firstClone instanceof HTMLElement) {
                    firstClone.dataset.loopClone = "first";
                }
                if (lastClone instanceof HTMLElement) {
                    lastClone.dataset.loopClone = "last";
                }

                scrollContainer.insertBefore(lastClone, cards[0]);
                scrollContainer.appendChild(firstClone);
                scrollContainer.dataset.loopPrepared = "true";

                // Start on the first real card (index 1 after prepending the last clone).
                requestAnimationFrame(() => {
                    withInstantScroll(() => {
                        scrollContainer.scrollLeft = getStep();
                    });
                });
            }
        }

        const syncLoopBounds = () => {
            const cards = getRealCards();
            if (cards.length < 2) return;

            const step = getStep();
            const firstRealOffset = step;
            const lastRealOffset = step * cards.length;
            const leftBoundary = step * 0.5;
            const rightBoundary = step * (cards.length + 0.5);
            const currentLeft = scrollContainer.scrollLeft;

            if (currentLeft <= leftBoundary) {
                withInstantScroll(() => {
                    scrollContainer.scrollLeft = lastRealOffset;
                });
                return;
            }

            if (currentLeft >= rightBoundary) {
                withInstantScroll(() => {
                    scrollContainer.scrollLeft = firstRealOffset;
                });
            }
        };

        let settleTimer;
        scrollContainer.onscroll = () => {
            window.clearTimeout(settleTimer);
            settleTimer = window.setTimeout(syncLoopBounds, 80);
        };

        // Use onclick so re-initializing after route transitions doesn't stack listeners.
        rightBtn.onclick = () => {
            scrollContainer.scrollBy({ left: getStep(), behavior: "smooth" });
        };

        leftBtn.onclick = () => {
            scrollContainer.scrollBy({ left: -getStep(), behavior: "smooth" });
        };
    };

    // Initial load and client-side navigation (Astro view transitions)
    initHobbyScroll();
    if (!window.__hobbyScrollInitBound) {
        document.addEventListener("astro:page-load", initHobbyScroll);
        window.__hobbyScrollInitBound = true;
    }
</script>

<style>
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }
    .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    .animate-spin-slow {
        animation: spin 8s linear infinite;
    }
    @keyframes spin {
        from {
            transform: rotate(0deg);
        }
        to {
            transform: rotate(360deg);
        }
    }
</style>
